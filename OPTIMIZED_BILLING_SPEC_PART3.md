# Optimized Billing - Part 3: UI/UX Specification

## 4. UI Layout & Components

### 4.1 Page Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WEAVETEX EMBROIDERY          IGP: [____]  Code: [____] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Party: [________]  Bill#: [AUTO]  Date: [____]         â”‚
â”‚  Collection: [____]  Design#: [____]  Notes: [_______]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  BILLING MATRIX (Spreadsheet-style)                     â”‚
â”‚                                                          â”‚
â”‚  Design: FLORAL-001                    [+ Add Variant]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Metric   â”‚ ORG      â”‚ POLY     â”‚ COTTON   â”‚         â”‚
â”‚  â”‚          â”‚ 11.55YRD â”‚ 10.00YRD â”‚ 12.00YRD â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ STITCH   â”‚ [50000]  â”‚ [45000]  â”‚ [48000]  â”‚         â”‚
â”‚  â”‚ RATE/ST  â”‚ [0.85]   â”‚ [0.90]   â”‚ [0.88]   â”‚         â”‚
â”‚  â”‚ RATE/YD  â”‚  2.35 ğŸ”’ â”‚  2.50 ğŸ”’ â”‚  2.44 ğŸ”’ â”‚         â”‚
â”‚  â”‚ RATE/REP â”‚ [42.50]  â”‚ [45.00]  â”‚ [44.00]  â”‚         â”‚
â”‚  â”‚ REPEATS  â”‚ [100]    â”‚ [95]     â”‚ [98]     â”‚         â”‚
â”‚  â”‚ PIECES   â”‚ [50]     â”‚ [48]     â”‚ [49]     â”‚         â”‚
â”‚  â”‚ AMOUNT   â”‚  27.14 ğŸ”’â”‚  25.00 ğŸ”’â”‚  29.28 ğŸ”’â”‚         â”‚
â”‚  â”‚ WTE OGP  â”‚ [WTE001] â”‚ [WTE002] â”‚ [WTE003] â”‚         â”‚
â”‚  â”‚ H2H PO   â”‚ [H2H001] â”‚ [H2H002] â”‚ [H2H003] â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                          â”‚
â”‚  [+ Add Design]                                         â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ TOTAL BILL: $81.42                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  [Save Bill]  [Preview]  [Export PDF]  [Export Excel]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BILL HISTORY                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Bill#â”‚ Date â”‚ Party â”‚ Items  â”‚ Total  â”‚ Actions â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ B001 â”‚ 2/5  â”‚ ABC   â”‚ 3 var  â”‚ $81.42 â”‚ V P E D â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
ğŸ”’ = Auto-calculated (read-only unless overridden)
V = View, P = Print, E = Export, D = Edit
```

### 4.2 Component Breakdown

#### 4.2.1 Factory Header Component
```typescript
<FactoryHeader>
  <Left>
    <Logo />
    <CompanyName>WEAVETEX EMBROIDERY</CompanyName>
  </Left>
  <Right>
    <TextField label="IGP" />
    <TextField label="Code" />
  </Right>
</FactoryHeader>
```

#### 4.2.2 Bill Header Component
```typescript
<BillHeader>
  <TextField label="Party Name" required />
  <TextField label="Bill #" disabled value={autoGenerated} />
  <DatePicker label="Bill Date" required />
  <TextField label="Collection" />
  <TextField label="Design #" />
  <TextField label="Notes" multiline rows={2} />
</BillHeader>
```

#### 4.2.3 Design Group Component
```typescript
<DesignGroup designNo="FLORAL-001">
  <DesignHeader>
    <Typography>Design: {designNo}</Typography>
    <Button onClick={addVariant}>+ Add Variant</Button>
  </DesignHeader>
  <MatrixTable>
    <TableHead>
      <TableRow>
        <TableCell>Metric</TableCell>
        {variants.map(v => (
          <TableCell key={v.id}>
            {v.fabric}<br/>
            {v.yards} YRD
          </TableCell>
        ))}
      </TableRow>
    </TableHead>
    <TableBody>
      {metrics.map(metric => (
        <MetricRow key={metric.name} metric={metric} variants={variants} />
      ))}
    </TableBody>
  </MatrixTable>
</DesignGroup>
```


#### 4.2.4 Metric Row Component
```typescript
interface MetricRowProps {
  metric: {
    name: string;
    field: string;
    type: 'input' | 'calculated';
    formula?: string;
  };
  variants: Variant[];
  onChange: (variantId, field, value) => void;
}

<MetricRow>
  <TableCell>{metric.name}</TableCell>
  {variants.map(variant => (
    <TableCell key={variant.id}>
      {metric.type === 'input' ? (
        <TextField
          value={variant[metric.field]}
          onChange={(e) => onChange(variant.id, metric.field, e.target.value)}
          type="number"
        />
      ) : (
        <Box>
          <Typography>{variant[metric.field]}</Typography>
          <LockIcon fontSize="small" />
          <Tooltip title={metric.formula}>
            <InfoIcon fontSize="small" />
          </Tooltip>
        </Box>
      )}
    </TableCell>
  ))}
</MetricRow>
```

#### 4.2.5 Add Variant Dialog
```typescript
<Dialog open={openAddVariant}>
  <DialogTitle>Add Fabric Variant</DialogTitle>
  <DialogContent>
    <TextField label="Fabric Type" placeholder="e.g., ORG, POLY" required />
    <TextField label="Yards" type="number" required />
    <TextField label="Notes" multiline rows={2} />
  </DialogContent>
  <DialogActions>
    <Button onClick={cancel}>Cancel</Button>
    <Button onClick={addVariant} variant="contained">Add Variant</Button>
  </DialogActions>
</Dialog>
```

### 4.3 Keyboard Navigation

- **Tab**: Move to next editable cell
- **Shift+Tab**: Move to previous editable cell
- **Enter**: Move to cell below (same column)
- **Shift+Enter**: Move to cell above (same column)
- **Arrow Keys**: Navigate between cells
- **Ctrl+S**: Save bill
- **Escape**: Cancel current edit

### 4.4 Inline Help & Tooltips

Display formula help text below/beside calculated fields:

```typescript
<Tooltip title="Formula: (D-Stitch Ã· 1000) Ã— 2.77 Ã— Rate">
  <InfoIcon />
</Tooltip>
```

Show validation errors inline:
```typescript
<TextField
  error={!!errors.stitches}
  helperText={errors.stitches || "Formula: Auto-calculated from production"}
/>
```

### 4.5 Responsive Design

- **Desktop (>1200px)**: Full matrix view with all columns visible
- **Tablet (768-1200px)**: Horizontal scroll for matrix, fixed metric column
- **Mobile (<768px)**: Stack variants vertically, one variant per card
